!function(r){sitemartThemeModule.addToCartAllTypes=function(){0!=sitemart_settings.ajax_add_to_cart&&(sitemartThemeModule.$body.on("submit","form.cart",function(a){var d,t=r(this),o=t.parents(".single-product-page");(o=0===o.length?t.parents(".product-quick-view"):o).hasClass("product-type-external")||o.hasClass("product-type-zakeke")||o.hasClass("product-type-gift-card")||void 0!==a.originalEvent&&r(a.originalEvent.submitter).hasClass("dj-buy-now-btn")||(a.preventDefault(),d=t.find(".single_add_to_cart_button"),o=t.serialize(),o+="&action=ajax_add_to_cart",d.val()&&(o+="&add-to-cart="+d.val()),d.removeClass("added not-added"),d.addClass("loading"),sitemartThemeModule.$body.trigger("adding_to_cart",[d,o]),r.ajax({url:sitemart_settings.ajaxurl,data:o,method:"POST",success:function(a){var t,o,e;a&&(window.location.toString().replace("add-to-cart","added-to-cart"),a.error&&a.product_url?window.location=a.product_url:"yes"===sitemart_settings.cart_redirect_after_add?window.location=sitemart_settings.cart_url:(d.removeClass("loading"),t=a.fragments,o=a.cart_hash,t&&r.each(t,function(a){r(a).addClass("updating")}),t&&r.each(t,function(a,t){r(a).replaceWith(t)}),(e=r(".site_front-notices-wrapper")).empty(),0<a.notices.indexOf("error")?(e.append(a.notices),d.addClass("not-added")):(void 0!==r.fn.magnificPopup&&"widget"===sitemart_settings.add_to_cart_action&&r.magnificPopup.close(),d.addClass("added"),sitemartThemeModule.$body.trigger("added_to_cart",[t,o,d]))))},error:function(){console.log("ajax adding to cart error")},complete:function(){}}))}),sitemartThemeModule.$body.on("click",".variations_form .dj-buy-now-btn",function(a){var t=r(this).siblings(".single_add_to_cart_button");"undefined"!=typeof fs_add_to_cart_variation_params&&t.hasClass("disabled")&&(a.preventDefault(),t.hasClass("fs-variation-is-unavailable")?alert(fs_add_to_cart_variation_params.i18n_unavailable_text):t.hasClass("fs-variation-selection-needed")&&alert(fs_add_to_cart_variation_params.i18n_make_a_selection_text))}))},r(document).ready(function(){sitemartThemeModule.addToCartAllTypes()})}(jQuery);